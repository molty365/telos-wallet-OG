"use strict";(globalThis["webpackChunktelos_web_wallet"]=globalThis["webpackChunktelos_web_wallet"]||[]).push([[361],{92361:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ee});var a=t(59835),n=t(86970);const o={class:"c-send-page-errors__form-container"},r={class:"c-send-page-errors__row c-send-page-errors__row--1 row"},l={class:"col"},i={class:"c-send-page-errors__row c-send-page-errors__row--3 row"},c={class:"col-12 col-sm-auto c-send-page-errors__token-selection-container"},d={class:"c-send-page-errors__selector-op-avatar"},u=["src"],m={class:"c-send-page-errors__view-contract-text"},_={class:"col"},g={class:"c-send-page-errors__row c-send-page-errors__row--4 row"},p={class:"col-auto"},h={class:"c-send-page-errors__gas-fee"},w={class:"row o-text--header-5 u-text--default-contrast text-no-wrap"},v={class:"row c-send-page-errors__gas-fee-info"},k={class:"flex items-center justify-center col-auto q-mr-xs flex-column"},y={class:"col-auto"},f={class:"row text-no-wrap o-text--small u-text--default-contrast"},b={class:"row text-no-wrap o-text--small u-text--default-contrast"},C={class:"c-send-page-errors__row c-send-page-errors__row--5 row"},I={class:"col"},x={class:"justify-end row"};function S(e,s,t,S,T,L){const V=(0,a.up)("q-spinner"),$=(0,a.up)("AddressInput"),E=(0,a.up)("q-item-label"),q=(0,a.up)("q-item"),G=(0,a.up)("q-select"),Z=(0,a.up)("q-space"),F=(0,a.up)("q-icon"),U=(0,a.up)("CurrencyInput"),W=(0,a.up)("q-btn"),z=(0,a.up)("q-form"),A=(0,a.up)("AppPage");return(0,a.wg)(),(0,a.j4)(A,null,{default:(0,a.w5)((()=>[(0,a._)("div",o,[e.balances?.length?((0,a.wg)(),(0,a.j4)(z,{key:1,class:"c-send-page-errors__form"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",l,[(0,a.Wm)($,{modelValue:e.address,"onUpdate:modelValue":s[0]||(s[0]=s=>e.address=s),name:"send-page-address-input",label:e.$t("evm_wallet.receiving_account"),"onUpdate:isValid":s[1]||(s[1]=s=>e.addressIsValid=s)},null,8,["modelValue","label"])])]),(0,a._)("div",i,[(0,a._)("div",c,[(0,a.Wm)(G,{modelValue:e.selected,"onUpdate:modelValue":s[2]||(s[2]=s=>e.selected=s),outlined:"",label:e.$t("evm_wallet.token"),options:e.balances,class:"c-send-page-errors__token-selector"},{selected:(0,a.w5)((()=>[(0,a._)("span",null,(0,n.zw)(e.token?.symbol),1)])),option:(0,a.w5)((s=>[(0,a.Wm)(q,(0,a.dG)({class:"c-send-page-errors__selector-op"},s.itemProps),{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("img",{class:"c-send-page-errors__selector-op-icon",src:s.opt.token.logoURI,alt:"Token Logo"},null,8,u)]),(0,a._)("div",null,[(0,a.Wm)(E,{class:"c-send-page-errors__selector-op-name"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(s.opt.token.name),1)])),_:2},1024),(0,a.Wm)(E,{class:"c-send-page-errors__selector-op-balance",caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.prettyPrintBalance(s.opt.str,e.fiatLocale,e.isMobile,s.opt.token.symbol)),1)])),_:2},1024)])])),_:2},1040)])),_:1},8,["modelValue","label","options"]),(0,a._)("div",{class:(0,n.C_)({"c-send-page-errors__view-contract":!0,"c-send-page-errors__view-contract--hidden":!e.showContractLink}),onClick:s[3]||(s[3]=(...s)=>e.viewTokenContract&&e.viewTokenContract(...s))},[(0,a._)("span",m,(0,n.zw)(e.$t("evm_wallet.view_contract")),1),e.isMobile?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Z,{key:0})),(0,a.Wm)(F,{size:"xs",name:"launch",class:"c-send-page-errors__view-contract-min-icon"})],2)]),(0,a._)("div",_,[(0,a.Wm)(U,(0,a.dG)({modelValue:e.amount,"onUpdate:modelValue":s[4]||(s[4]=s=>e.amount=s)},e.currencyInputSecondaryCurrencyBindings,{loading:e.currencyInputIsLoading,locale:e.fiatLocale,decimals:e.tokenDecimals,symbol:e.tokenSymbol,"max-value":e.availableInTokensBn,"error-if-over-max":!0,label:e.$t("global.amount"),required:"required",name:"sendpage-errors-demo-currency-input-1"}),null,16,["modelValue","loading","locale","decimals","symbol","max-value","label"])])]),(0,a._)("div",g,[(0,a.Wm)(Z),(0,a._)("div",p,[(0,a._)("div",h,[(0,a._)("div",w,(0,n.zw)(e.$t("evm_wallet.estimated_fees")),1),(0,a._)("div",v,[(0,a.Wm)(Z),(0,a._)("div",k,[(0,a.Wm)(F,{class:"c-send-page-errors__gas-icon",name:"local_gas_station"})]),(0,a._)("div",y,[(0,a._)("div",f,(0,n.zw)(e.gasFeeInSystemSym),1),(0,a._)("div",b,(0,n.zw)(e.gasFeeInFiat),1)])])])])]),(0,a._)("div",C,[(0,a._)("div",I,[(0,a._)("div",x,[(0,a.Wm)(W,{color:!e.isFormValid||e.isLoading?"negative":"primary",class:"wallet-btn",label:e.$t("evm_wallet.send"),loading:e.isLoading,onClick:e.startTransfer},null,8,["color","label","loading","onClick"])])])])])),_:1})):((0,a.wg)(),(0,a.j4)(V,{key:0}))])])),_:1})}var T=t(84193),L=t(77155),V=t(43446),$=t(84746),E=t(39447),q=t(92338),G=t(36306),Z=t(17779);const F=26250,U=55500,W=(0,T.getAntelope)(),z=(0,T.useUserStore)(),A=(0,T.useAccountStore)(),B=(0,T.useChainStore)(),Q=(0,a.aZ)({name:"SendPageErrors",components:{AddressInput:G.Z,CurrencyInput:q.Z},data:()=>({address:"",addressIsValid:!1,fiatConversionRate:0,selected:null,amount:$.O$.from(0),estimatedGas:{system:E._Y,fiat:E._Y},prettyPrintBalance:V.ze}),watch:{balances:{handler(){let e=this.selected;if(this.selected=null,this.balances.length>0){const s=this.$route.query.token;s&&(e=this.balances.find((e=>e.token.address===s))??e,this.$router.replace({name:"evm-send",params:{token:void 0}})),e||(e=this.balances.find((e=>e.token.address===L.L4))??e),e||(e=this.balances[0])}this.selected=e},immediate:!0,deep:!0},token:{async handler(e,s){e?.address!==s?.address&&(this.updateEstimatedGas(),this.fiatConversionRate=e?+e.price.str:void 0)},immediate:!0,deep:!0}},computed:{token(){return this.selected?.token??void 0},loggedAccount(){return A.loggedEvmAccount},gasFeeInSystemSym(){const e=B.loggedChain.settings.getSystemToken().symbol,s=`${(0,V.rE)(this.estimatedGas.system,18,18)}`;return(0,V.ze)(s,z.fiatLocale,this.isMobile,e)},gasFeeInFiat(){const e=`${(0,V.rE)(this.estimatedGas.fiat,18,18)}`;return(0,V.yD)(e,z.fiatLocale,this.isMobile,z.fiatCurrency)},isMobile(){return this.$q.screen.lt.sm},balances(){return W.stores.balances.getBalances(T.CURRENT_CONTEXT)},showContractLink(){return!!this.token?.address},currencyInputSecondaryCurrencyBindings(){const e=!!this.fiatConversionRate;return e?{secondaryCurrencyCode:z.fiatCurrency,secondaryCurrencyConversionFactor:this.fiatConversionRate,secondaryCurrencyDecimals:2}:{}},fiatLocale(){return z.fiatLocale},tokenSymbol(){return this.token?.symbol??B.loggedChain.settings.getSystemToken().symbol},tokenDecimals(){return this.token?.decimals??0},availableInTokensBn(){return this.selected&&this.selected.balance?this.selected.balance.sub(this.selected.isSystem?this.estimatedGas.system:E._Y):E._Y},isAddressValid(){const e=/^0x[a-fA-F0-9]{40}$/;return e.test(this.address)},isFormValid(){return this.addressIsValid&&!(this.amount.isZero()||this.amount.isNegative()||this.amount.gt(this.availableInTokensBn))},isLoading(){return W.stores.feedback.isLoading("transferTokens")},currencyInputIsLoading(){return!(this.token?.decimals&&this.token?.symbol)||this.isLoading}},methods:{async updateEstimatedGas(){const e=B.loggedEvmChain?.settings;e?this.token?.isSystem?this.estimatedGas=await e.getEstimatedGas(F):this.estimatedGas=await e.getEstimatedGas(U):this.estimatedGas={system:E._Y,fiat:E._Y}},viewTokenContract(){if(this.token){const e=W.stores.chain.loggedEvmChain?.settings.getExplorerUrl();if(e)return void window.open(e+"/address/"+this.token.address,"_blank");W.config.notifyFailureMessage(this.$t("settings.no_explorer",{network:W.stores.chain.currentChain?.settings.getNetwork()}))}},async startTransfer(){const e=this.token,s=this.amount,t=this.address;W.stores.balances.transferTokens(e,t,s).then((e=>{const s=W.stores.chain.loggedEvmChain?.settings;s&&W.config.notifySuccessfulTrxHandler(`${s.getExplorerUrl()}/tx/${e.hash}`)})).catch((e=>{Z.error(e)}))}}});var R=t(11639),j=t(13902),M=t(8326),Y=t(4581),P=t(490),D=t(33115),N=t(90136),O=t(22857),H=t(68879),X=t(69984),J=t.n(X);const K=(0,R.Z)(Q,[["render",S]]),ee=K;J()(Q,"components",{QSpinner:j.Z,QForm:M.Z,QSelect:Y.Z,QItem:P.Z,QItemLabel:D.Z,QSpace:N.Z,QIcon:O.Z,QBtn:H.Z})}}]);