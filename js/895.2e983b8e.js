(globalThis["webpackChunktelos_web_wallet"]=globalThis["webpackChunktelos_web_wallet"]||[]).push([[895],{94895:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ve});var l=a(59835),s=a(24352),n=a(86970),o=a(60499),r=a(27712),i=a(71856),c=a(84746),u=a(84193),d=a(79428),m=a(43446),_=a(13031),y=a(28339);const v={class:"c-staking-header"},b={class:"text-center q-mb-xl"},k={class:"u-text--high-contrast"},g=(0,l.aZ)({__name:"StakingPageHeader",setup(e){const t=(0,y.yj)(),{t:a}=(0,r.QT)(),s=(0,u.useUserStore)(),g=(0,u.useBalancesStore)(),w=(0,u.useChainStore)(),S=w.loggedChain.settings,h=(0,u.useRexStore)(),T=(0,l.Fl)((()=>s.fiatLocale)),p=(0,l.Fl)((()=>s.fiatCurrency)),U=S.getSystemToken(),x=S.getStakedSystemToken(),E=(0,l.Fl)((()=>w.getUnstakedRatio(u.CURRENT_CONTEXT))),I=(0,l.Fl)((()=>void 0===N.value||E.value.isZero())),D=(0,l.Fl)((()=>{if(N.value&&!E.value.isZero()){const e=i.formatUnits(E.value,x.decimals);return(0,d.Nh)(N.value,x.decimals,x.decimals,e)}})),M=(0,l.Fl)((()=>{if(D.value&&C.value&&!C.value.isZero()){const e=i.formatUnits(C.value,U.price.decimals);return(0,d.Nh)(D.value,x.decimals,U.decimals,e)}})),N=(0,l.Fl)((()=>{const e=g.getBalances(u.CURRENT_CONTEXT),t=e.find((e=>e.token.symbol===x.symbol))?.amount;return t||void 0})),C=(0,l.Fl)((()=>{const e=g.getBalances(u.CURRENT_CONTEXT),t=e.find((e=>e.token.symbol===U.symbol))?.token.price.value;return t||void 0})),f=(0,l.Fl)((()=>{const e=(0,u.useRexStore)().getRexData(u.CURRENT_CONTEXT);if(e){const t=e.balance,a=e.withdrawable;return t&&a?t.sub(a):void 0}})),A=(0,l.Fl)((()=>{if(f.value&&!f.value.isZero()&&C.value&&!C.value.isZero()){const e=i.formatUnits(C.value,U.price.decimals);return(0,d.Nh)(f.value,x.decimals,U.decimals,e)}})),R=(0,l.Fl)((()=>void 0===f.value)),j=(0,l.Fl)((()=>(0,u.useRexStore)().getRexData(u.CURRENT_CONTEXT)?.withdrawable)),F=(0,l.Fl)((()=>{if(j.value&&C.value&&!C.value.isZero()){const e=i.formatUnits(C.value,U.price.decimals);return(0,d.Nh)(j.value,x.decimals,U.decimals,e)}})),L=(0,l.Fl)((()=>void 0===j.value)),O=(0,l.Fl)((()=>{const e=w.currentEvmChain?.apy;return e&&""!==e?e+"%":"4%"})),Z=(0,l.Fl)((()=>!1)),z=(0,l.Fl)((()=>h.getUnstakingPeriodString(u.CURRENT_CONTEXT))),$=(0,l.Fl)((()=>"--"===z.value)),W=(0,l.Fl)((()=>{const e=(0,u.useRexStore)().getRexData(u.CURRENT_CONTEXT)?.totalStaking;return e||void 0})),V=(0,l.Fl)((()=>w.currentEvmChain?.settings.getDisplay()??"")),B=(0,l.Fl)((()=>{const e=M.value??c.O$.from(0),t=A.value??c.O$.from(0),a=F.value??c.O$.from(0);return e.add(t).add(a)})),P=(0,l.Fl)((()=>[{label:a("evm_stake.staked_card_label",{symbol:U.symbol}),tooltip:a("evm_stake.staked_card_tooltip",{stakedSymbol:x.symbol,systemSymbol:U.symbol}),primaryText:X(M.value,p.value),secondaryText:I.value?"":X(D.value,U.symbol),lowContrastSecondaryText:!0,isPrimaryLoading:I.value,useSmallBox:!0},{label:a("evm_stake.unstaking_card_label"),tooltip:a("evm_stake.unstaking_card_tooltip",{stakedSymbol:x.symbol,systemSymbol:U.symbol,unlockPeriod:z.value}),primaryText:X(A.value,p.value),secondaryText:R.value?"":X(f.value,U.symbol),isPrimaryLoading:R.value,lowContrastSecondaryText:!0,useSmallBox:!0},{label:a("evm_stake.withdrawable_card_label"),tooltip:a("evm_stake.withdrawable_card_tooltip",{stakedSymbol:x.symbol,systemSymbol:U.symbol,unlockPeriod:z.value}),primaryText:X(F.value,p.value),secondaryText:L.value?"":X(j.value,U.symbol),lowContrastSecondaryText:!0,isPrimaryLoading:L.value,useSmallBox:!0}])),Y=(0,l.Fl)((()=>[{label:a("evm_stake.apy_card_label",{symbol:U.symbol}),tooltip:a("evm_stake.apy_card_tooltip",{stakedSymbol:x.symbol,systemSymbol:U.symbol}),secondaryText:O.value,lowContrastSecondaryText:!1,isSecondaryLoading:Z.value,useSmallBox:!0},{label:a("evm_stake.unstaking_period_card_label"),tooltip:a("evm_stake.unstaking_period_card_tooltip",{stakedSymbol:x.symbol,systemSymbol:U.symbol}),secondaryText:z.value,lowContrastSecondaryText:!1,isSecondaryLoading:$.value,useSmallBox:!0},{label:a("evm_stake.tvl_card_label"),tooltip:a("evm_stake.tvl_card_tooltip",{evmNetworkName:V.value,stakedSymbol:x.symbol,systemSymbol:U.symbol}),secondaryText:X(W.value,U.symbol),lowContrastSecondaryText:!1,useSmallBox:!0}])),H=setInterval((()=>{I.value&&(void 0===N.value&&g.updateBalances(u.CURRENT_CONTEXT),E.value.isZero()&&w.updateStakedRatio(u.CURRENT_CONTEXT)),(R.value||L.value||$.value)&&(0,u.useRexStore)().updateRexData(u.CURRENT_CONTEXT),Z.value&&w.updateApy(u.CURRENT_CONTEXT),"/evm/staking"===t.path&&(I.value||R.value||L.value||Z.value)||clearInterval(H)}),5e3);function X(e,t){let a=t===p.value?2:4;return e&&!e.isZero()||(a=1),(0,d.kg)(e??c.O$.from(0),a,T.value,!1,t,!1,m.Rs)}return(e,t)=>((0,l.wg)(),(0,l.iD)("div",v,[(0,l._)("div",b,[(0,l._)("h5",null,(0,n.zw)((0,o.SU)(a)("evm_stake.total_of_staked_unstaking_and_withdrawable",{token:(0,o.SU)(U).name})),1),(0,l._)("h1",k,(0,n.zw)(X((0,o.SU)(B),(0,o.SU)(p))),1)]),(0,l.Wm)(_.Z,{class:"c-staking-header__cards-first-line",cards:(0,o.SU)(P)},null,8,["cards"]),(0,l.Wm)(_.Z,{class:"c-staking-header__cards-second-line",cards:(0,o.SU)(Y)},null,8,["cards"])]))}}),w=g,S=w;var h=a(68113),T=a.n(h),p=a(39447),U=a(18395),x=a(67061),E=a(92338),I=a(17779);const D={class:"row q-mb-xl"},M={class:"col-12"},N={class:"c-stake-tab__badge-container"},C={class:"row q-mb-lg"},f={class:"col-12"},A={class:"row q-mb-sm"},R={class:"col-12 text-center"},j=["alt"],F={class:"row q-mb-lg"},L={class:"col-12"},O={class:"row"},Z={class:"col-12"},z={class:"c-stake-tab__cta-container"},$=(0,l.aZ)({__name:"StakingTab",setup(e){const{t}=(0,r.QT)(),a=2,s=(0,u.getAntelope)(),n=(0,u.useChainStore)(),i=n.currentChain.settings,d=(0,u.useUserStore)(),_=(0,u.useBalancesStore)(),y=((0,u.useAccountStore)(),i.getSystemToken()),v=y.symbol,b=y.decimals,k=i.getStakedSystemToken(),g=k.symbol,w=k.decimals,S=c.O$.from("1".concat("0".repeat(b))),h=(0,o.iH)(p._Y),$=(0,o.iH)(p._Y),W=(0,l.Fl)((()=>n.getStakedRatio(u.CURRENT_CONTEXT))),V=(0,l.Fl)((()=>{if(W.value.isZero())return p._Y;const e=h.value.mul(W.value).div(S);return e})),B=(0,l.Fl)((()=>d.fiatLocale)),P=(0,l.Fl)((()=>d.fiatCurrency)),Y=(0,l.Fl)((()=>_.currentBalances.filter((e=>e.token.contract===y.address))[0])),H=(0,l.Fl)((()=>Y.value?.token.price.getAmountInFiatStr(1)??"1")),X=(0,l.Fl)((()=>Y.value?.amount??p._Y)),q=(0,l.Fl)((()=>{const e=t("evm_stake.stake_sidebar_title",{symbol:v}),a=[{text:t("evm_stake.stake_sidebar_content_fragment_1",{systemSymbol:v,stakedSymbol:g})},{text:t("evm_stake.stake_sidebar_content_fragment_2_bold"),bold:!0},{text:t("evm_stake.stake_sidebar_content_fragment_3",{systemSymbol:v,stakedSymbol:g})},{text:t("evm_stake.stake_sidebar_content_fragment_4_bold"),bold:!0},{text:t("evm_stake.stake_sidebar_content_fragment_5",{systemSymbol:v,stakedSymbol:g})}];return{header:e,content:a}})),Q=(0,l.Fl)((()=>{const e=X.value.sub($.value);return e.lt(0)?p._Y:e})),G=(0,l.Fl)((()=>!K.value&&!V.value.isZero()&&h.value.gt(0)&&h.value.lte(Q.value))),K=(0,l.Fl)((()=>s.stores.feedback.isLoading("stakeEVMSystemTokens")));async function J(){const e=u.CURRENT_CONTEXT;if(await(0,u.useAccountStore)().assertNetworkConnection(e)&&G.value)try{const a=await(0,u.useRexStore)().stakeEVMSystemTokens(e,h.value),l=(0,m.rE)(h.value,b,m.Rs),n=s.config.notifyNeutralMessageHandler(t("notification.neutral_message_staking",{quantity:l,symbol:v}));a.wait().then((()=>{s.config.notifySuccessfulTrxHandler(`${i.getExplorerUrl()}/tx/${a.hash}`)})).catch((e=>{I.error(e)})).finally((()=>{n()}))}catch(a){I.error(a)}}return(0,l.wF)((()=>{const e=55500;i.getEstimatedGas(e).then((e=>{$.value=e.system}))})),(e,s)=>{const n=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.j4)(U.Z,{"sidebar-content":(0,o.SU)(q)},{default:(0,l.w5)((()=>[(0,l._)("div",D,[(0,l._)("div",M,[(0,l._)("div",N,[(0,l.Wm)(x.Z,{"token-one-symbol":(0,o.SU)(v),"token-two-symbol":(0,o.SU)(g),"token-two-decimals":(0,o.SU)(b),"token-two-amount":(0,o.SU)(W),decimals:a},null,8,["token-one-symbol","token-two-symbol","token-two-decimals","token-two-amount"])])])]),(0,l._)("div",C,[(0,l._)("div",f,[(0,l.Wm)(E.Z,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),symbol:(0,o.SU)(v),decimals:(0,o.SU)(b),"decimals-to-display":a,"secondary-currency-code":(0,o.SU)(P),"secondary-currency-decimals":2,"secondary-currency-conversion-factor":(0,o.SU)(H),locale:(0,o.SU)(B),label:(0,o.SU)(t)("evm_stake.stake_input_label"),"max-value":(0,o.SU)(Q),class:"c-stake-tab__input",name:"staking-tab-currency-input-1"},null,8,["modelValue","symbol","decimals","secondary-currency-code","secondary-currency-conversion-factor","locale","label","max-value"])])]),(0,l._)("div",A,[(0,l._)("div",R,[(0,l._)("img",{src:T(),alt:(0,o.SU)(t)("global.arrow_icon_alt"),height:"20",width:"18"},null,8,j)])]),(0,l._)("div",F,[(0,l._)("div",L,[(0,l.Wm)(E.Z,{"model-value":(0,o.SU)(V),symbol:(0,o.SU)(g),decimals:(0,o.SU)(w),"decimals-to-display":a,locale:(0,o.SU)(B),label:(0,o.SU)(t)("evm_stake.stake_output_label"),class:"c-stake-tab__input",readonly:"readonly",name:"staking-tab-currency-input-2"},null,8,["model-value","symbol","decimals","locale","label"])])]),(0,l._)("div",O,[(0,l._)("div",Z,[(0,l._)("div",z,[(0,l.Wm)(n,{color:"primary",disable:!(0,o.SU)(G),loading:(0,o.SU)(K),label:(0,o.SU)(t)("evm_stake.stake"),"aria-label":(0,o.SU)(t)("evm_stake.stake_button_label",{systemSymbol:(0,o.SU)(v),stakedSymbol:(0,o.SU)(g)}),onClick:J},null,8,["disable","loading","label","aria-label"])])])])])),_:1},8,["sidebar-content"])}}});var W=a(68879),V=a(69984),B=a.n(V);const P=$,Y=P;B()($,"components",{QBtn:W.Z});var H=a(17779);const X={class:"row q-mb-xl"},q={class:"col-12"},Q={class:"c-unstake-tab__badge-container"},G={class:"row q-mb-lg"},K={class:"col-12"},J={class:"row q-mb-sm"},ee={class:"col-12 text-center"},te=["alt"],ae={class:"row q-mb-lg"},le={class:"col-12"},se={class:"row"},ne={class:"col-12"},oe={class:"c-unstake-tab__cta-container"},re=(0,l.aZ)({__name:"UnstakingTab",setup(e){const{t}=(0,r.QT)(),a=2,s=(0,u.getAntelope)(),n=(0,u.useChainStore)(),i=n.currentChain.settings,d=(0,u.useUserStore)(),_=(0,u.useBalancesStore)(),y=((0,u.useAccountStore)(),(0,u.useRexStore)()),v=i.getSystemToken(),b=v.symbol,k=v.decimals,g=i.getStakedSystemToken(),w=g.symbol,S=g.decimals,h=c.O$.from("1".concat("0".repeat(k))),I=(0,o.iH)(p._Y),D=(0,l.Fl)((()=>n.getUnstakedRatio(u.CURRENT_CONTEXT))),M=(0,l.Fl)((()=>{if(D.value.isZero())return p._Y;const e=I.value.mul(D.value).div(h);return e})),N=(0,l.Fl)((()=>d.fiatLocale)),C=(0,l.Fl)((()=>d.fiatCurrency)),f=(0,l.Fl)((()=>_.currentBalances.filter((e=>e.token.contract===v.address))[0])),A=(0,l.Fl)((()=>f.value?.token.price.getAmountInFiatStr(1)??"1")),R=(0,l.Fl)((()=>_.currentBalances.filter((e=>e.token.contract===g.address))[0])),j=(0,l.Fl)((()=>R.value?.amount??p._Y)),F=(0,l.Fl)((()=>{const e=t("evm_stake.unstake_sidebar_title",{symbol:b}),a=[{text:t("evm_stake.unstake_sidebar_content_fragment_1",{systemSymbol:b})},{text:t("evm_stake.unstake_sidebar_content_fragment_2_bold",{period:y.getUnstakingPeriodString(u.CURRENT_CONTEXT)}),bold:!0},{text:t("evm_stake.unstake_sidebar_content_fragment_3",{systemSymbol:b,stakedSymbol:w})}];return{header:e,content:a}})),L=(0,l.Fl)((()=>j.value)),O=(0,l.Fl)((()=>!Z.value&&!M.value.isZero()&&I.value.gt(0)&&I.value.lte(L.value))),Z=(0,l.Fl)((()=>s.stores.feedback.isLoading("unstakeEVMSystemTokens")));async function z(){const e=u.CURRENT_CONTEXT;if(await(0,u.useAccountStore)().assertNetworkConnection(e)&&O.value)try{const a=4,l=await(0,u.useRexStore)().unstakeEVMSystemTokens(e,M.value),n=(0,m.rE)(M.value,k,a),o=s.config.notifyNeutralMessageHandler(t("notification.neutral_message_unstaking",{quantity:n,symbol:b}));l.wait().then((()=>{s.config.notifySuccessfulTrxHandler(`${i.getExplorerUrl()}/tx/${l.hash}`)})).catch((e=>{H.error(e)})).finally((()=>{o()}))}catch(a){H.error(a)}}return(e,s)=>{const n=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.j4)(U.Z,{"sidebar-content":(0,o.SU)(F)},{default:(0,l.w5)((()=>[(0,l._)("div",X,[(0,l._)("div",q,[(0,l._)("div",Q,[(0,l.Wm)(x.Z,{"token-one-symbol":(0,o.SU)(w),"token-two-symbol":(0,o.SU)(b),"token-two-decimals":(0,o.SU)(S),"token-two-amount":(0,o.SU)(D),decimals:a},null,8,["token-one-symbol","token-two-symbol","token-two-decimals","token-two-amount"])])])]),(0,l._)("div",G,[(0,l._)("div",K,[(0,l.Wm)(E.Z,{modelValue:I.value,"onUpdate:modelValue":s[0]||(s[0]=e=>I.value=e),symbol:(0,o.SU)(w),decimals:(0,o.SU)(S),"decimals-to-display":a,locale:(0,o.SU)(N),label:(0,o.SU)(t)("evm_stake.unstake_input_label"),"max-value":(0,o.SU)(L),class:"c-unstake-tab__input",name:"unstaking-tab-currency-input-1"},null,8,["modelValue","symbol","decimals","locale","label","max-value"])])]),(0,l._)("div",J,[(0,l._)("div",ee,[(0,l._)("img",{src:T(),alt:(0,o.SU)(t)("global.arrow_icon_alt"),height:"20",width:"18"},null,8,te)])]),(0,l._)("div",ae,[(0,l._)("div",le,[(0,l.Wm)(E.Z,{"model-value":(0,o.SU)(M),symbol:(0,o.SU)(b),decimals:(0,o.SU)(k),"decimals-to-display":a,"secondary-currency-code":(0,o.SU)(C),"secondary-currency-decimals":2,"secondary-currency-conversion-factor":(0,o.SU)(A),locale:(0,o.SU)(N),label:(0,o.SU)(t)("evm_stake.unstake_output_label"),class:"c-unstake-tab__input",readonly:"readonly",name:"unstaking-tab-currency-input-2"},null,8,["model-value","symbol","decimals","secondary-currency-code","secondary-currency-conversion-factor","locale","label"])])]),(0,l._)("div",se,[(0,l._)("div",ne,[(0,l._)("div",oe,[(0,l.Wm)(n,{color:"primary",disable:!(0,o.SU)(O),loading:(0,o.SU)(Z),label:(0,o.SU)(t)("evm_stake.unstake"),"aria-label":(0,o.SU)(t)("evm_stake.unstake_button_label",{systemSymbol:(0,o.SU)(b),stakedSymbol:(0,o.SU)(w)}),onClick:z},null,8,["disable","loading","label","aria-label"])])])])])),_:1},8,["sidebar-content"])}}}),ie=re,ce=ie;B()(re,"components",{QBtn:W.Z});const ue={class:"c-stake-withdrawal-row"},de={class:"c-stake-withdrawal-row__left-container"},me={class:"c-stake-withdrawal-row__left-icon"},_e={class:"c-stake-withdrawal-row__middle-container"},ye={class:"c-stake-withdrawal-row__left-content"},ve={class:"c-stake-withdrawal-row__withdrawal-status"},be={class:"o-text--small q-mr-md"},ke={class:"c-stake-withdrawal-row__right-container"},ge={ref:"balance-container",class:"c-stake-withdrawal-row__balance-container"},we={class:"c-stake-withdrawal-row__primary-amount"},Se={key:0,class:"c-stake-withdrawal-row__secondary-amount"};function he(e,t,s,o,r,i){const c=(0,l.up)("InlineSvg"),u=(0,l.up)("ToolTip");return(0,l.wg)(),(0,l.iD)("div",ue,[(0,l._)("div",de,[(0,l._)("div",me,[(0,l.Wm)(c,{src:a(85598)(`./icon--calendar-${e.isWithdrawable?"check":"clock"}.svg`),class:"c-stake-withdrawal-row__icon",height:"24",width:"24","aria-hidden":"true"},null,8,["src"])])]),(0,l._)("div",_e,[(0,l._)("div",ye,[(0,l._)("div",null,[(0,l._)("span",ve,[e.isWithdrawable?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l.Uk)((0,n.zw)(e.$t("evm_stake.withdrawal_available")),1)],64)):""!==e.pendingTime?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,n.zw)(e.$t("evm_stake.unstaking_pending_time",{time:e.pendingTime})),1)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l.Uk)((0,n.zw)(e.$t("evm_stake.withdrawal_updatng")),1)],64))])]),(0,l._)("div",null,[(0,l._)("span",be,(0,n.zw)(e.isWithdrawable?e.longDate:e.$t("evm_stake.withdrawal_date",{date:e.longDate})),1)])])]),(0,l._)("div",ke,[(0,l._)("div",ge,[(0,l._)("div",we,(0,n.zw)(e.prettyPrimaryAmount),1),""!==e.secondaryAmount?((0,l.wg)(),(0,l.iD)("span",Se,[e.truncateSecondaryValue?((0,l.wg)(),(0,l.j4)(u,{key:0,text:e.formatTooltipBalance(+e.secondaryAmount,!e.$q.screen.lt.sm),"hide-icon":!0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.prettySecondaryAmount),1)])),_:1},8,["text"])):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Uk)((0,n.zw)(e.prettySecondaryAmount),1)],64))])):(0,l.kq)("",!0)],512)])])}var Te=a(47735),pe=a(16894),Ue=a(49746);const xe=(0,u.useUserStore)(),Ee=(0,u.useChainStore)(),{fiatLocale:Ie,fiatCurrency:De}=xe,Me=(0,l.aZ)({name:"WalletBalanceRow",components:{InlineSvg:Te.Z,ToolTip:Ue.Z},emits:["update-rex-data"],data(){return{now:Date.now(),pendingTime:"",timer:setTimeout((()=>{}),0)}},props:{withdrawal:{type:Object,required:!0}},computed:{epoch(){return this.withdrawal.until.toNumber()},longDate(){return(0,pe.L0)(this.epoch,pe.K_,!1)},isWithdrawable(){return this.epoch<=this.now/1e3},token(){const e=Ee.getChain(u.CURRENT_CONTEXT).settings,t=e.getSystemToken();return t},tokenBalanceFiat(){return this.token.price.isAvailable?+this.token.price.getAmountInFiatStr(this.withdrawal.amount):null},truncatePrimaryValue(){const e=this.$q.screen.lt.sm;return!!e&&this.primaryAmount.toString().length>8},truncateSecondaryValue(){const e=this.$q.screen.lt.sm;return!!e&&this.secondaryAmount.toString().length>7},primaryAmount(){return this.tokenBalanceFiat},prettyPrimaryAmount(){return(0,d.kg)(+this.primaryAmount,2,Ie,this.truncatePrimaryValue,De,!1)},secondaryAmount(){let e="0";const t=this.withdrawal.amount;return e=i.formatUnits(t,this.token.decimals),e},prettySecondaryAmount(){const e="string"===typeof this.secondaryAmount&&!this.secondaryAmount;if(e)return"";if(this.truncateSecondaryValue)return(0,d.kg)(+this.secondaryAmount,4,Ie,!0).concat(` ${this.token.symbol}`);{const e=(0,d.kg)(+this.secondaryAmount,4,Ie);return`${e} ${this.token.symbol}`}}},methods:{updatePendingTime(){this.now=Date.now();const e=this.$t("antelope.words.days"),t=this.$t("antelope.words.hours"),a=this.$t("antelope.words.minutes"),l=this.$t("antelope.words.seconds"),s=this.epoch-this.now/1e3,n=Math.floor(s/86400),o=Math.floor(s%86400/3600),r=Math.floor(s%3600/60),i=Math.floor(s%60),c=n>0?`${n} ${e} `:"",u=o>0?`${o} ${t} `:"",d=!n&&r>0?`${r} ${a} `:"",m=!n&&!o&&i>0?`${i} ${l} `:"";this.pendingTime=`${c}${u}${d}${m}`},formatTooltipBalance(e,t){const a=t?2:4,l=t?De:this.token.symbol;return`${(0,d.kg)(e,a,Ie)} ${l}`},enterSecondUpdatedinterval(){clearInterval(this.timer),this.timer=setInterval((()=>{this.updatePendingTime(),this.isWithdrawable&&(this.$emit("update-rex-data"),clearInterval(this.timer))}),1e3)},scheduleMinuteUpdatePendingTime(){const e=this.$t("antelope.words.seconds");this.updatePendingTime(),this.pendingTime.includes(e)?this.enterSecondUpdatedinterval():setTimeout((()=>{this.updatePendingTime(),this.scheduleMinuteUpdatePendingTime()}),6e4)}},mounted(){this.scheduleMinuteUpdatePendingTime()},beforeUnmount(){clearInterval(this.timer)},watch:{withdrawal:{handler(){this.scheduleMinuteUpdatePendingTime()},deep:!0}}});var Ne=a(11639);const Ce=(0,Ne.Z)(Me,[["render",he]]),fe=Ce;var Ae=a(17779);const Re={class:"c-withdraw-tab"},je={class:"c-withdraw-tab__withdraw-btn"},Fe={class:"c-withdraw-tab__row"},Le=(0,l.aZ)({__name:"WithdrawTab",setup(e){const{t}=(0,r.QT)(),a=2,s=(0,u.getAntelope)(),i=(0,u.useChainStore)(),c=i.currentChain.settings,d=((0,u.useAccountStore)(),(0,u.useRexStore)()),_=(0,u.useFeedbackStore)(),y=(0,o.iH)(!1),v=c.getSystemToken(),b=v.symbol,k=v.decimals,g=(0,l.Fl)((()=>_.isLoading("withdrawEVMSystemTokens"))),w=(0,l.Fl)((()=>d.getEvmRexData(u.CURRENT_CONTEXT)?.deposits??[])),S=(0,l.Fl)((()=>(0,u.useRexStore)().getRexData(u.CURRENT_CONTEXT)?.withdrawable??p._Y)),h=(0,l.Fl)((()=>!y.value&&S.value.gt(p._Y)&&!g.value)),T=async()=>{if(!h.value||g.value)return;const e=u.CURRENT_CONTEXT;if(await(0,u.useAccountStore)().assertNetworkConnection(e))try{y.value=!0;const e=await(0,u.useRexStore)().withdrawEVMSystemTokens(u.CURRENT_CONTEXT,S.value),a=(0,m.rE)(S.value,k,4),l=s.config.notifyNeutralMessageHandler(t("notification.neutral_message_withdrawing",{quantity:a,symbol:b}));e.wait().then((()=>{s.config.notifySuccessfulTrxHandler(`${c.getExplorerUrl()}/tx/${e.hash}`),y.value=!1})).catch((e=>{Ae.error(e)})).finally((()=>{l()}))}catch(a){Ae.error(a)}},U=()=>{(0,u.useRexStore)().updateRexData(u.CURRENT_CONTEXT)};return U(),(e,s)=>{const r=(0,l.up)("q-btn"),i=(0,l.up)("q-spinner-dots");return(0,l.wg)(),(0,l.iD)("div",Re,[(0,l._)("div",je,[(0,l.Wm)(r,{label:(0,o.SU)(t)((0,o.SU)(h)?"evm_stake.withdraw_button_enabled":"evm_stake.withdraw_button_disabled",{amount:(0,o.SU)(m.rE)((0,o.SU)(S),(0,o.SU)(k),a),symbol:(0,o.SU)(b)}),disable:!(0,o.SU)(h),loading:(0,o.SU)(g),color:"primary",onClick:T},null,8,["label","disable","loading"])]),(0,l._)("div",Fe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(w),((e,t)=>((0,l.wg)(),(0,l.j4)(fe,{key:`withdrawal-${t}`,withdrawal:e,class:"q-mb-xs",onUpdateRexData:U},null,8,["withdrawal"])))),128))]),(0,l._)("div",{class:(0,n.C_)({"c-withdraw-tab__loading":!0,"c-withdraw-tab__loading--hide":!(0,o.SU)(g)})},[(0,l.Wm)(i,{color:"primary",size:"2em"})],2)])}}});var Oe=a(47501);const Ze=Le,ze=Ze;B()(Le,"components",{QBtn:W.Z,QSpinnerDots:Oe.Z});const $e=(0,l.aZ)({__name:"StakingPage",setup(e){const t=["stake","unstake","withdraw"];return(e,a)=>((0,l.wg)(),(0,l.j4)(s.Z,{tabs:t},{header:(0,l.w5)((()=>[(0,l.Wm)(S)])),stake:(0,l.w5)((()=>[(0,l.Wm)(Y)])),unstake:(0,l.w5)((()=>[(0,l.Wm)(ce)])),withdraw:(0,l.w5)((()=>[(0,l.Wm)(ze)])),_:1}))}}),We=$e,Ve=We},22349:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE5IDNIMThWMUgxNlYzSDhWMUg2VjNINUMzLjkgMyAzIDMuOSAzIDVWMTlDMyAyMC4xMSAzLjkgMjEgNSAyMUgxOUMyMC4xMSAyMSAyMSAyMC4xMSAyMSAxOVY1QzIxIDMuOSAyMC4xMSAzIDE5IDNaTTE5IDE5SDVWOUgxOVYxOVpNNSA3VjVIMTlWN0g1Wk0xMC41NiAxNy40NkwxNi41IDExLjUzTDE1LjQzIDEwLjQ3TDEwLjU2IDE1LjM0TDguNDUgMTMuMjNMNy4zOSAxNC4yOUwxMC41NiAxNy40NloiIGZpbGw9IiM1NzFBRkYiLz4KPC9zdmc+Cg=="},98418:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYgMVYzSDVDMy44OSAzIDMgMy44OSAzIDVWMTlDMyAyMC4xIDMuODkgMjEgNSAyMUgxMS4xQzEyLjM2IDIyLjI0IDE0LjA5IDIzIDE2IDIzQzE5Ljg3IDIzIDIzIDE5Ljg3IDIzIDE2QzIzIDE0LjA5IDIyLjI0IDEyLjM2IDIxIDExLjFWNUMyMSAzLjkgMjAuMTEgMyAxOSAzSDE4VjFIMTZWM0g4VjFNNSA1SDE5VjdINU01IDlIMTlWOS42N0MxOC4wOSA5LjI0IDE3LjA3IDkgMTYgOUMxMi4xMyA5IDkgMTIuMTMgOSAxNkM5IDE3LjA3IDkuMjQgMTguMDkgOS42NyAxOUg1TTE2IDExLjE1QzE4LjY4IDExLjE1IDIwLjg1IDEzLjMyIDIwLjg1IDE2QzIwLjg1IDE4LjY4IDE4LjY4IDIwLjg1IDE2IDIwLjg1QzEzLjMyIDIwLjg1IDExLjE1IDE4LjY4IDExLjE1IDE2QzExLjE1IDEzLjMyIDEzLjMyIDExLjE1IDE2IDExLjE1Wk0xNSAxM1YxNi42OUwxOC4xOSAxOC41M0wxOC45NCAxNy4yM0wxNi41IDE1LjgyVjEzSDE1WiIgZmlsbD0iIzUwNURDRCIvPgo8L3N2Zz4K"},85598:(e,t,a)=>{var l={"./icon--calendar-check.svg":22349,"./icon--calendar-clock.svg":98418};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}s.keys=function(){return Object.keys(l)},s.resolve=n,e.exports=s,s.id=85598}}]);